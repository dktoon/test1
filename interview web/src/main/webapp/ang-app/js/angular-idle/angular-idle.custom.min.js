!function(e,t,n){"use strict";t.module("ngIdle",["ngIdle.keepalive","ngIdle.idle","ngIdle.countdown","ngIdle.title","ngIdle.localStorage"]),t.module("ngIdle.keepalive",[]).provider("Keepalive",function(){var e={http:null,interval:600};this.http=function(n){if(!n)throw new Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");t.isString(n)&&(n={url:n,method:"GET"}),n.cache=!1,e.http=n};var n=this.interval=function(t){if(t=parseInt(t),isNaN(t)||0>=t)throw new Error("Interval must be expressed in seconds and be greater than 0.");e.interval=t};this.$get=["$rootScope","$log","$interval","$http",function(i,o,u,r){function l(e,t){i.$broadcast("KeepaliveResponse",e,t)}function d(){i.$broadcast("Keepalive"),t.isObject(e.http)&&r(e.http).success(l).error(l)}var s={ping:null};return{_options:function(){return e},setInterval:n,start:function(){return u.cancel(s.ping),s.ping=u(d,1e3*e.interval),s.ping},stop:function(){u.cancel(s.ping)},ping:function(){d()}}}]}),t.module("ngIdle.idle",["ngIdle.keepalive","ngIdle.localStorage"]).provider("Idle",function(){var n={idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown  scroll",keepalive:!0,titleDisabled:!1},i=this.timeout=function(e){if(e===!1)n.timeout=0;else{if(!(t.isNumber(e)&&e>=0))throw new Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");n.timeout=e}};this.interrupt=function(e){n.interrupt=e};var o=this.idle=function(e){if(0>=e)throw new Error("Idle must be a value in seconds, greater than 0.");n.idle=e},u=this.titleDisabled=function(e){n.titleDisabled=e===!0};this.autoResume=function(e){e===!0?n.autoResume="idle":e===!1?n.autoResume="off":n.autoResume=e},this.keepalive=function(e){n.keepalive=e===!0},this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(r,l,d,s,a,c,f){function g(){n.keepalive&&($.running&&a.ping(),a.start())}function m(){n.keepalive&&a.stop()}function v(){$.idling=!$.idling;var e=$.idling?"Start":"End";d.$broadcast("Idle"+e),$.idling?(m(),n.timeout&&($.countdown=n.timeout,p(),$.timeout=r(p,1e3,n.timeout,!1))):g(),r.cancel($.idle)}function p(){return $.countdown<=0?void h():(d.$broadcast("IdleWarn",$.countdown),void $.countdown--)}function h(){m(),r.cancel($.idle),r.cancel($.timeout),$.idling=!0,$.running=!1,$.countdown=0,d.$broadcast("IdleTimeout")}function w(e,t,n){var i=e.running();e.unwatch(),t(n),i&&e.watch()}function I(){var e=c.get("expiry");return e&&e.time?new Date(e.time):null}function T(e){e?c.set("expiry",{id:b,time:e}):c.remove("expiry")}var $={idle:null,timeout:null,idling:!1,running:!1,countdown:null},b=(new Date).getTime(),D={_options:function(){return n},_getNow:function(){return new Date},getIdle:function(){return n.idle},getTimeout:function(){return n.timeout},setIdle:function(e){w(this,o,e)},setTitleDisabled:function(e){w(this,u,e)},isTitleDisabled:function(){return n.titleDisabled},setTimeout:function(e){w(this,i,e)},isExpired:function(){var e=I();return null!==e&&e<=this._getNow()},running:function(){return $.running},idling:function(){return $.idling},watch:function(e){r.cancel($.idle),r.cancel($.timeout);var t=n.timeout?n.timeout:0;e||T(new Date((new Date).getTime()+1e3*(n.idle+t))),$.idling?v():$.running||g(),$.running=!0,$.idle=r(v,1e3*n.idle,0,!1)},unwatch:function(){r.cancel($.idle),r.cancel($.timeout),$.idling=!1,$.running=!1,T(null),m()},interrupt:function(e){return $.running?n.timeout&&this.isExpired()?void h():void(("idle"===n.autoResume||"notIdle"===n.autoResume&&!$.idling)&&this.watch(e)):void 0}},S={timeout:0,resetTimeout:0,first:!0};s.find("body").on(n.interrupt,function(t){return clearTimeout(S.timeout),S.first?(S.first=!1,D.interrupt(),clearTimeout(S.resetTimeout),void(S.resetTimeout=e.setTimeout(function(){S.first=!0},4e3))):void(S.timeout=e.setTimeout(function(){D.interrupt(),clearTimeout(S.resetTimeout),S.resetTimeout=e.setTimeout(function(){S.first=!0},4e3)},1e3))});var E=function(e){if("ngIdle.expiry"===e.key&&e.newValue!==e.oldValue){var n=t.fromJson(e.newValue);if(n.id===b)return;D.interrupt(!0)}};return f.addEventListener?f.addEventListener("storage",E,!1):f.attachEvent("onstorage",E),D}]}),t.module("ngIdle.countdown",["ngIdle.idle"]).directive("idleCountdown",["Idle",function(e){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(t){t.value=e.getTimeout(),t.$on("IdleWarn",function(e,n){t.$evalAsync(function(){t.value=n})}),t.$on("IdleTimeout",function(){t.$evalAsync(function(){t.value=0})})}}}]),t.module("ngIdle.title",[]).factory("Title",["$document","$interpolate",function(e,n){function i(e,t,n){return new Array(t-String(e).length+1).join(n||"0")+e}var o={original:null,idle:"{{minutes}}:{{seconds}} until your session times out!",timedout:"Your session has expired."};return{original:function(e){return t.isUndefined(e)?o.original:void(o.original=e)},store:function(e){(e||!o.original)&&(o.original=this.value())},value:function(n){return t.isUndefined(n)?e[0].title:void(e[0].title=n)},idleMessage:function(e){return t.isUndefined(e)?o.idle:void(o.idle=e)},timedOutMessage:function(e){return t.isUndefined(e)?o.timedout:void(o.timedout=e)},setAsIdle:function(e){this.store();var t={totalSeconds:e};t.minutes=Math.floor(e/60),t.seconds=i(e-60*t.minutes,2),this.value(n(this.idleMessage())(t))},setAsTimedOut:function(){this.store(),this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]).directive("title",["Idle","Title",function(e,t){return{restrict:"E",link:function(n,i,o){e.isTitleDisabled()||o.idleDisabled||(t.store(!0),n.$on("IdleStart",function(){t.original(i[0].innerText)}),n.$on("IdleWarn",function(e,n){t.setAsIdle(n)}),n.$on("IdleEnd",function(){t.restore()}),n.$on("IdleTimeout",function(){t.setAsTimedOut()}))}}}]),t.module("ngIdle.localStorage",[]).service("IdleLocalStorage",["$window",function(e){var n=e.localStorage;return{set:function(e,i){n.setItem("ngIdle."+e,t.toJson(i))},get:function(e){return t.fromJson(n.getItem("ngIdle."+e))},remove:function(e){n.removeItem("ngIdle."+e)}}}])}(window,window.angular);