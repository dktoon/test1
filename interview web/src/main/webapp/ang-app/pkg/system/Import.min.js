"use strict";function _call(r,t){if(r.isClass){var e=refPkg(r.pkg);return void 0===e||void 0===e[r.clz]?jQuery.ajax({url:r.url,success:function(t){e=refPkg(r.pkg),r.clzObj=e[r.clz]},error:function(t,e,n){console.log("Error loading "+r.pkg+"."+r.clz),console.log(t.status),console.log(n)},async:t}):(r.clzObj=e[r.clz],null)}return ImportJs(r.url,t)}function _getDataFromString(r){var t=!(0==r.indexOf("/")||0==r.indexOf("http")),e=t?r.substring(r.lastIndexOf(".")+1):null,n=t?r.substring(0,r.lastIndexOf(".")):null,o=t?PKG.root+n.replace(/\./g,"/")+"/"+e+".js":r,s={isClass:t,clz:e,pkg:n,url:o};return s}function ImportClassesJsAsyncBulk(r,t,e){var n={},o=[];for(var s in r){var a=r[s],i=[];n[s]=i;for(var c in a)if(a.hasOwnProperty(c)){var u=a[c];if("string"==typeof u){var l=_getDataFromString(u);i.push(l),o.push(l)}else if($.isArray(u)){var f=u;$.each(f,function(r,t){var e=_getDataFromString(t);i.push(e),o.push(e)})}}}$.ajax({type:"POST",url:"/ImportClassesJsAsyncBulk",data:JSON.stringify({type:"js",datas:o}),async:e,headers:{Accept:"*/*","Content-Type":"application/json"},success:function(r){for(var e in r)jQuery.globalEval(r[e]);for(var o in n){var s=n[o],a=[];for(var i in s)if(s.hasOwnProperty(i))if(null!=s[i].pkg){var c=refPkg(s[i].pkg);c[s[i].clz]&&a.push(c[s[i].clz])}else a.push(null);n[o]=a}t&&t(n)}})}function _doImportArraysScript(r,t){var e=jQuery.Deferred();return soon(function(){$.each(t,function(t,e){var n=_getDataFromString(e);r.push(n),_call(n,!1)}),e.resolve()}),e.promise()}function _ImportAsync(r,t){var e=[],n=[];for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];if("string"==typeof s){var a=_getDataFromString(s);e.push(a);var i=_call(a,!0);i&&n.push(i)}else if($.isArray(s)){var c=s;n.push(_doImportArraysScript(e,c))}}$.when.apply($,n).done(function(){var r=[];for(var n in e)if(e.hasOwnProperty(n)&&null!=e[n].pkg){var o=refPkg(e[n].pkg);o[e[n].clz]&&r.push(o[e[n].clz])}t&&(Import("system.Activator",!1),Activator.callFunc(t,r))})}function ImportAsync(r,t){setTimeout(function(){_ImportAsync(r,t)})}function ImportSync(r,t){_ImportAsync(r,t)}function Import(r){var t=r.substring(r.lastIndexOf(".")+1),e=r.substring(0,r.lastIndexOf(".")),n=refPkg(e);return(void 0===n||void 0===n[t])&&jQuery.ajax({url:PKG.root+e.replace(/\./g,"/")+"/"+t+".js",success:function(r){jQuery.globalEval(r),n=refPkg(e)},error:function(t,e,n){console.log(r),console.log(t.status),console.log(n)},async:!1}),n[t]}function ImportCss(r){var t=$("<link rel='stylesheet' type='text/css' href='"+PKG.root+r+"'>");$("head").append(t)}function ImportCssBulk(r,t){r.length>0&&$.ajax({type:"POST",url:"/generateImportCssAsyncBulk?id="+t,data:JSON.stringify(r),async:!0,headers:{Accept:"*/*","Content-Type":"application/json"},success:function(r){r=JSON.parse(r);for(var t in r){var e=r[t],n=$("<link rel='stylesheet' type='text/css' href='"+PKG.root+e+"'>");r.push(n)}$("head").append(r)}})}function ImportJs(r,t){var e=($("<script type='text/javascript' src='"+(0==r.indexOf("/")||0==r.indexOf("http")?r:PKG.root+r)+"'>"),0==r.indexOf("/")||0==r.indexOf("http")?r:PKG.root+r);return jQuery.ajax({url:e,success:function(r){jQuery.globalEval(r)},error:function(r,t,n){console.log(e),console.log(r.status),console.log(n)},async:t})}function ImportPromise(r,t){var e=refPkg(t);if(void 0===e){var n=_getDataFromString(t),o=jQuery.Deferred();return r.get(n.url).success(function(r){jQuery.globalEval(r),o.resolve({data:refPkg(t)})}).error(function(r,t,e,n){401==t?o.resolve({data:void 0,error:"Access Denied."}):o.resolve({data:void 0,error:r.message})}),o.promise()}return{data:e}}var soon=function(){function r(){for(;t.length;){var r=t[0];r.f.apply(r.m,r.a),t.shift()}}var t=[],e=function(){if("undefined"!=typeof MutationObserver){var r=document.createElement("div");return function(t){var e=new MutationObserver(function(){e.disconnect(),t()});e.observe(r,{attributes:!0}),r.setAttribute("a",0)}}return"undefined"!=typeof setImmediate?setImmediate:function(r){setTimeout(r,0)}}();return function(n){t.push({f:n,a:[].slice.apply(arguments).splice(1),m:this}),1==t.length&&e(r)}}();